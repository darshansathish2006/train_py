<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Railway Reservation System</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .suggestions-box {
            position: absolute;
            background: #23272f;
            border: 1.5px solid #6999be;
            border-radius: 6px;
            max-height: 220px;
            overflow-y: auto;
            z-index: 2000;
            width: 100%;
            box-shadow: 0 4px 16px rgba(60,80,140,0.27);
            margin-top: 8px;
            display: none;
            color: #eee;
        }

        .suggestion-item {
            padding: 13px 18px;
            cursor: pointer;
            border-bottom: 1px dotted #444;
            font-size: 15px;
            transition: background 0.17s;
            background: none;
        }

        .suggestion-item:last-child {
            border-bottom: none;
        }

        .suggestion-item:hover,
        .suggestion-item.active {
            background-color: #2f3e52;
            color: #fff;
        }

        .suggestion-item strong {
            display: block;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .suggestion-item small {
            color: #7eb9fd;
            font-size: 13px;
            letter-spacing: 0.5px;
        }

        .search-input-group {
            position: relative;
        }
    </style>
</head>
<body>
    <!-- Main Container -->
    <div id="app">
        <!-- Home Page -->
        <div id="home-page" class="page active">
            <header class="hero-header">
                <div class="container">
                    <div class="hero-content">
                        <h1>Railway Reservation System</h1>
                        <p class="hero-subtitle">Book your train tickets online with ease</p>
                        <div class="hero-actions">
                            <button class="btn btn--primary btn--lg" onclick="showPage('passenger-login')">Passenger Login</button>
                            <button class="btn btn--outline btn--lg" onclick="showPage('admin-login')">Admin Login</button>
                        </div>
                    </div>
                </div>
            </header>
            <section class="features-section">
                <div class="container">
                    <h2>Why Choose Us?</h2>
                    <div class="features-grid">
                        <div class="feature-card">
                            <div class="feature-icon">üé´</div>
                            <h3>Easy Booking</h3>
                            <p>Book tickets in just a few clicks with our intuitive interface</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">üí∞</div>
                            <h3>Best Prices</h3>
                            <p>Get discounts for students, seniors, and military personnel</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">‚≠ê</div>
                            <h3>Real-time Updates</h3>
                            <p>Check seat availability and train status instantly</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">üîí</div>
                            <h3>Secure Payment</h3>
                            <p>Your transactions are safe with our encrypted system</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>


        <!-- Passenger Login Page -->
        <div id="passenger-login" class="page">
            <div class="auth-container">
                <div class="auth-card">
                    <button class="back-btn" onclick="showPage('home-page')">&larr; Back to Home</button>
                    <h2>Passenger Login</h2>
                    <form id="login-form" onsubmit="handlePassengerLogin(event)">
                        <div class="form-group">
                            <label class="form-label" for="login-email">Email</label>
                            <input type="email" id="login-email" class="form-control" placeholder="Enter your email" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="login-password">Password</label>
                            <input type="password" id="login-password" class="form-control" placeholder="Enter your password" required>
                        </div>
                        <button type="submit" class="btn btn--primary btn--full-width">Login</button>
                    </form>
                    <div class="auth-footer">
                        <p>Don't have an account? <a href="#" onclick="showPage('passenger-register'); return false;">Register here</a></p>
                    </div>
                </div>
            </div>
        </div>


        <!-- Passenger Register Page -->
        <div id="passenger-register" class="page">
            <div class="auth-container">
                <div class="auth-card">
                    <button class="back-btn" onclick="showPage('passenger-login')">&larr; Back to Login</button>
                    <h2>Passenger Registration</h2>
                    <form id="register-form" onsubmit="handlePassengerRegister(event)">
                        <div class="form-group">
                            <label class="form-label" for="reg-name">Full Name</label>
                            <input type="text" id="reg-name" class="form-control" placeholder="Enter your full name" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="reg-email">Email</label>
                            <input type="email" id="reg-email" class="form-control" placeholder="Enter your email" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="reg-phone">Phone Number (Optional)</label>
                            <input type="tel" id="reg-phone" class="form-control" placeholder="Enter your phone number">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="reg-age">Age (Optional)</label>
                            <input type="number" id="reg-age" class="form-control" placeholder="Enter your age" min="1" max="120">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="reg-gender">Gender (Optional)</label>
                            <select id="reg-gender" class="form-control">
                                <option value="">Select Gender</option>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="reg-password">Password</label>
                            <input type="password" id="reg-password" class="form-control" placeholder="Create a password" required>
                        </div>
                        <button type="submit" class="btn btn--primary btn--full-width">Register</button>
                    </form>
                    <div class="auth-footer">
                        <p>Already have an account? <a href="#" onclick="showPage('passenger-login'); return false;">Login here</a></p>
                    </div>
                </div>
            </div>
        </div>


        <!-- Passenger Dashboard -->
        <div id="passenger-dashboard" class="page">
            <nav class="navbar">
                <div class="container">
                    <div class="navbar-content">
                        <div class="navbar-brand">üöâ Railway System</div>
                        <div class="navbar-menu">
                            <a href="#" onclick="showDashboardSection('search'); return false;" class="navbar-link active">Search Trains</a>
                            <a href="#" onclick="showDashboardSection('bookings'); return false;" class="navbar-link">My Bookings</a>
                            <a href="#" onclick="showDashboardSection('feedback'); return false;" class="navbar-link">Feedback</a>
                            <a href="#" onclick="showDashboardSection('profile'); return false;" class="navbar-link">Profile</a>
                            <button class="btn btn--sm btn--outline" onclick="logout()">Logout</button>
                        </div>
                    </div>
                </div>
            </nav>


            <div class="container dashboard-container">
                <!-- Search Section -->
                <div id="search-section" class="dashboard-section active">
                    <div class="page-header">
                        <h2>Search Trains</h2>
                        <p class="text-secondary">Find trains and book your journey</p>
                    </div>


                    <div class="card search-card">
                        <div class="card__body">
                            <form id="train-search-form" onsubmit="searchTrains(event)">
                                <div class="trip-type-toggle">
                                    <button type="button" class="trip-btn active" data-type="oneway" onclick="setTripType('oneway')">One Way</button>
                                    <button type="button" class="trip-btn" data-type="roundtrip" onclick="setTripType('roundtrip')">Round Trip</button>
                                </div>


                                <div class="search-form-grid">
                                    <!-- FROM Station with Autocomplete -->
                                    <div class="form-group search-input-group">
                                        <label class="form-label" for="search-source">From</label>
                                        <input type="text" id="search-source" class="form-control" autocomplete="off" placeholder="Search station..." required/>
                                        <input type="hidden" id="search-source-code"/>
                                        <div id="source-suggestions" class="suggestions-box"></div>
                                    </div>


                                    <!-- TO Station with Autocomplete -->
                                    <div class="form-group search-input-group">
                                        <label class="form-label" for="search-destination">To</label>
                                        <input type="text" id="search-destination" class="form-control" autocomplete="off" placeholder="Search station..." required/>
                                        <input type="hidden" id="search-destination-code"/>
                                        <div id="destination-suggestions" class="suggestions-box"></div>
                                    </div>


                                    <div class="form-group">
                                        <label class="form-label" for="search-date">Departure Date</label>
                                        <input type="date" id="search-date" class="form-control" required>
                                    </div>


                                    <div class="form-group" id="return-date-group" style="display: none;">
                                        <label class="form-label" for="search-return-date">Return Date</label>
                                        <input type="date" id="search-return-date" class="form-control">
                                    </div>
                                </div>


                                <button type="submit" class="btn btn--primary btn--lg">Search Trains</button>
                            </form>
                        </div>
                    </div>


                    <!-- Search Results -->
                    <div id="search-results" style="display: none;">
                        <div class="page-header">
                            <h3>Available Trains</h3>
                        </div>
                        <div id="trains-list"></div>
                    </div>


                    <!-- Booking Modal -->
                    <div id="booking-modal" class="modal" style="display: none;">
                        <div class="modal-content">
                            <button class="modal-close" onclick="closeBookingModal()">&times;</button>
                            <h3>Book Your Ticket</h3>
                            <form id="booking-form" onsubmit="confirmBooking(event)">
                                <div id="booking-train-info" class="booking-info"></div>


                                <div class="form-group">
                                    <label class="form-label" for="passenger-name">Passenger Name</label>
                                    <input type="text" id="passenger-name" class="form-control" required>
                                </div>


                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label" for="passenger-age">Age</label>
                                        <input type="number" id="passenger-age" class="form-control" min="1" max="120" required>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label" for="passenger-gender">Gender</label>
                                        <select id="passenger-gender" class="form-control" required>
                                            <option value="Male">Male</option>
                                            <option value="Female">Female</option>
                                            <option value="Other">Other</option>
                                        </select>
                                    </div>
                                </div>


                                <div class="form-group">
                                    <label class="form-label" for="booking-class">Class</label>
                                    <select id="booking-class" class="form-control" required onchange="calculateFare()">
                                        <option value="Sleeper">Sleeper</option>
                                        <option value="AC 3 Tier">AC 3 Tier</option>
                                        <option value="AC 2 Tier">AC 2 Tier</option>
                                        <option value="First Class">First Class</option>
                                    </select>
                                </div>


                                <div class="form-group">
                                    <label class="form-label" for="booking-category">Category</label>
                                    <select id="booking-category" class="form-control" required onchange="calculateFare()">
                                        <option value="General">General</option>
                                        <option value="Senior Citizen">Senior Citizen (30% discount)</option>
                                        <option value="Student">Student (25% discount)</option>
                                        <option value="Military">Military (50% discount)</option>
                                    </select>
                                </div>


                                <div class="form-group">
                                    <label class="form-label" for="num-seats">Number of Seats</label>
                                    <input type="number" id="num-seats" class="form-control" min="1" max="6" value="1" required onchange="calculateFare()">
                                </div>


                                <div class="fare-summary">
                                    <div class="fare-row">
                                        <span>Base Fare:</span>
                                        <span id="base-fare">‚Çπ0</span>
                                    </div>
                                    <div class="fare-row">
                                        <span>Discount:</span>
                                        <span id="discount-amount">‚Çπ0</span>
                                    </div>
                                    <div class="fare-row total">
                                        <span>Total Fare:</span>
                                        <span id="total-fare">‚Çπ0</span>
                                    </div>
                                </div>


                                <button type="submit" class="btn btn--primary btn--full-width btn--lg">Confirm Booking</button>
                            </form>
                        </div>
                    </div>
                </div>


                <!-- My Bookings Section -->
                <div id="bookings-section" class="dashboard-section">
                    <div class="page-header">
                        <h2>My Bookings</h2>
                        <p class="text-secondary">View and manage your train reservations</p>
                    </div>


                    <div id="bookings-list">
                        <!-- Bookings will be dynamically inserted here -->
                    </div>
                </div>


                <!-- Feedback Section -->
                <div id="feedback-section" class="dashboard-section">
                    <div class="page-header">
                        <h2>Feedback &amp; Ratings</h2>
                        <p class="text-secondary">Share your experience with us</p>
                    </div>


                    <div class="card">
                        <div class="card__body">
                            <form id="feedback-form" onsubmit="submitFeedback(event)">
                                <div class="form-group">
                                    <label class="form-label" for="feedback-train">Select Train</label>
                                    <select id="feedback-train" class="form-control" required>
                                        <option value="">Choose a train you traveled in</option>
                                        <option value="Express Superfast">Express Superfast</option>
                                        <option value="Rajdhani Express">Rajdhani Express</option>
                                    </select>
                                </div>


                                <div class="form-group">
                                    <label class="form-label">Rating</label>
                                    <div class="star-rating">
                                        <input type="radio" id="star5" name="rating" value="5" required>
                                        <label for="star5" class="star">‚òÖ</label>
                                        <input type="radio" id="star4" name="rating" value="4">
                                        <label for="star4" class="star">‚òÖ</label>
                                        <input type="radio" id="star3" name="rating" value="3">
                                        <label for="star3" class="star">‚òÖ</label>
                                        <input type="radio" id="star2" name="rating" value="2">
                                        <label for="star2" class="star">‚òÖ</label>
                                        <input type="radio" id="star1" name="rating" value="1">
                                        <label for="star1" class="star">‚òÖ</label>
                                    </div>
                                </div>


                                <div class="form-group">
                                    <label class="form-label" for="feedback-comment">Your Comments</label>
                                    <textarea id="feedback-comment" class="form-control" rows="4" placeholder="Share your experience..." required></textarea>
                                </div>


                                <button type="submit" class="btn btn--primary">Submit Feedback</button>
                            </form>
                        </div>
                    </div>


                    <div class="page-header" style="margin-top: 2rem;">
                        <h3>Recent Feedback</h3>
                    </div>
                    <div id="feedback-list"></div>
                </div>


                <!-- Profile Section -->
                <div id="profile-section" class="dashboard-section">
                    <div class="page-header">
                        <h2>My Profile</h2>
                        <p class="text-secondary">Manage your account information</p>
                    </div>


                    <div class="card">
                        <div class="card__body">
                            <form id="profile-form" onsubmit="updateProfile(event)">
                                <div class="form-group">
                                    <label class="form-label" for="profile-name">Full Name</label>
                                    <input type="text" id="profile-name" class="form-control" required>
                                </div>


                                <div class="form-group">
                                    <label class="form-label" for="profile-email">Email</label>
                                    <input type="email" id="profile-email" class="form-control" required>
                                </div>


                                <div class="form-group">
                                    <label class="form-label" for="profile-phone">Phone Number</label>
                                    <input type="tel" id="profile-phone" class="form-control" required>
                                </div>


                                <button type="submit" class="btn btn--primary">Update Profile</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!-- Admin Login Page -->
        <div id="admin-login" class="page">
            <div class="auth-container">
                <div class="auth-card">
                    <button class="back-btn" onclick="showPage('home-page')">&larr; Back to Home</button>
                    <h2>Admin Login</h2>
                    <form id="admin-login-form" onsubmit="handleAdminLogin(event)">
                        <div class="form-group">
                            <label class="form-label" for="admin-email">Admin Email</label>
                            <input type="email" id="admin-email" class="form-control" placeholder="Enter admin email" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="admin-password">Password</label>
                            <input type="password" id="admin-password" class="form-control" placeholder="Enter password" required>
                        </div>
                        <button type="submit" class="btn btn--primary btn--full-width">Login as Admin</button>
                    </form>
                    <div class="auth-footer">
                        <p class="text-secondary">Admin access only</p>
                    </div>
                </div>
            </div>
        </div>


        <!-- Admin Dashboard -->
        <div id="admin-dashboard" class="page">
            <nav class="navbar admin-navbar">
                <div class="container">
                    <div class="navbar-content">
                        <div class="navbar-brand">üöâ Admin Panel</div>
                        <div class="navbar-menu">
                            <a href="#" onclick="showAdminSection('overview'); return false;" class="navbar-link active">Overview</a>
                            <a href="#" onclick="showAdminSection('trains'); return false;" class="navbar-link">Manage Trains</a>
                            <a href="#" onclick="showAdminSection('admin-bookings'); return false;" class="navbar-link">Bookings</a>
                            <a href="#" onclick="showAdminSection('admin-feedback'); return false;" class="navbar-link">Feedback</a>
                            <button class="btn btn--sm btn--outline" onclick="logout()">Logout</button>
                        </div>
                    </div>
                </div>
            </nav>


            <div class="container dashboard-container">
                <!-- Overview Section -->
                <div id="overview-section" class="dashboard-section active">
                    <div class="page-header">
                        <h2>Dashboard Overview</h2>
                        <p class="text-secondary">Real-time statistics and insights</p>
                    </div>


                    <div class="stats-grid">
                        <div class="stat-card" style="background-color: var(--color-bg-1);">
                            <div class="stat-icon">üöÇ</div>
                            <div class="stat-content">
                                <div class="stat-value">25</div>
                                <div class="stat-label">Total Trains</div>
                            </div>
                        </div>
                        <div class="stat-card" style="background-color: var(--color-bg-2);">
                            <div class="stat-icon">üé´</div>
                            <div class="stat-content">
                                <div class="stat-value">1,247</div>
                                <div class="stat-label">Total Bookings</div>
                            </div>
                        </div>
                        <div class="stat-card" style="background-color: var(--color-bg-3);">
                            <div class="stat-icon">üí∞</div>
                            <div class="stat-content">
                                <div class="stat-value">‚Çπ1,25,000</div>
                                <div class="stat-label">Today's Revenue</div>
                            </div>
                        </div>
                        <div class="stat-card" style="background-color: var(--color-bg-4);">
                            <div class="stat-icon">üë•</div>
                            <div class="stat-content">
                                <div class="stat-value">3,456</div>
                                <div class="stat-label">Active Passengers</div>
                            </div>
                        </div>
                    </div>


                    <div class="page-header" style="margin-top: 2rem;">
                        <h3>Popular Routes</h3>
                    </div>
                    <div class="card">
                        <div class="card__body">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Route</th>
                                        <th>Bookings</th>
                                        <th>Revenue</th>
                                        <th>Occupancy</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Mumbai - Delhi</td>
                                        <td>450</td>
                                        <td>‚Çπ3,50,000</td>
                                        <td><span class="status status--success">85%</span></td>
                                    </tr>
                                    <tr>
                                        <td>Chennai - Kolkata</td>
                                        <td>380</td>
                                        <td>‚Çπ2,95,000</td>
                                        <td><span class="status status--warning">92%</span></td>
                                    </tr>
                                    <tr>
                                        <td>Bangalore - Hyderabad</td>
                                        <td>320</td>
                                        <td>‚Çπ1,85,000</td>
                                        <td><span class="status status--success">78%</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>


                <!-- Manage Trains Section -->
                <div id="trains-section" class="dashboard-section">
                    <div class="page-header">
                        <h2>Manage Trains</h2>
                        <button class="btn btn--primary" onclick="showAddTrainForm()">+ Add New Train</button>
                    </div>


                    <div id="add-train-form" class="card" style="display: none; margin-bottom: 2rem;">
                        <div class="card__body">
                            <h3>Add New Train</h3>
                            <form onsubmit="addTrain(event)">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label" for="train-id">Train ID</label>
                                        <input type="text" id="train-id" class="form-control" required>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label" for="train-name">Train Name</label>
                                        <input type="text" id="train-name" class="form-control" required>
                                    </div>
                                </div>
                                <div class="form-actions">
                                    <button type="submit" class="btn btn--primary">Add Train</button>
                                    <button type="button" class="btn btn--outline" onclick="hideAddTrainForm()">Cancel</button>
                                </div>
                            </form>
                        </div>
                    </div>


                    <div class="card">
                        <div class="card__body">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Train ID</th>
                                        <th>Name</th>
                                        <th>Route</th>
                                        <th>Timing</th>
                                        <th>Seats</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>12345</td>
                                        <td>Express Superfast</td>
                                        <td>Mumbai ‚Üí Delhi</td>
                                        <td>06:00 - 22:30</td>
                                        <td>50 / 200</td>
                                        <td><span class="status status--success">Active</span></td>
                                    </tr>
                                    <tr>
                                        <td>67890</td>
                                        <td>Rajdhani Express</td>
                                        <td>Chennai ‚Üí Kolkata</td>
                                        <td>14:15 - 08:45</td>
                                        <td>20 / 300</td>
                                        <td><span class="status status--warning">Almost Full</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>


                <!-- Admin Bookings Section -->
                <div id="admin-bookings-section" class="dashboard-section">
                    <div class="page-header">
                        <h2>All Bookings</h2>
                        <p class="text-secondary">Manage and monitor all reservations</p>
                    </div>


                    <div class="card">
                        <div class="card__body">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Booking ID</th>
                                        <th>Passenger</th>
                                        <th>Train</th>
                                        <th>Route</th>
                                        <th>Date</th>
                                        <th>Seats</th>
                                        <th>Status</th>
                                        <th>Fare</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>BK001</td>
                                        <td>John Doe</td>
                                        <td>Express Superfast</td>
                                        <td>Mumbai to Delhi</td>
                                        <td>2025-11-15</td>
                                        <td>2</td>
                                        <td><span class="status status--success">Confirmed</span></td>
                                        <td>‚Çπ900</td>
                                    </tr>
                                    <tr>
                                        <td>BK002</td>
                                        <td>Jane Smith</td>
                                        <td>Rajdhani Express</td>
                                        <td>Chennai to Kolkata</td>
                                        <td>2025-11-20</td>
                                        <td>1</td>
                                        <td><span class="status status--warning">Waiting List</span></td>
                                        <td>‚Çπ1,150</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>


                <!-- Admin Feedback Section -->
                <div id="admin-feedback-section" class="dashboard-section">
                    <div class="page-header">
                        <h2>Customer Feedback</h2>
                        <p class="text-secondary">Monitor passenger reviews and ratings</p>
                    </div>


                    <div id="admin-feedback-list">
                        <div class="feedback-card">
                            <div class="feedback-header">
                                <div>
                                    <div class="feedback-author">John Doe</div>
                                    <div class="feedback-meta">Express Superfast ‚Ä¢ 2025-10-20</div>
                                </div>
                                <div class="feedback-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ 4.0</div>
                            </div>
                            <div class="feedback-comment">Comfortable journey, good service</div>
                        </div>


                        <div class="feedback-card">
                            <div class="feedback-header">
                                <div>
                                    <div class="feedback-author">Jane Smith</div>
                                    <div class="feedback-meta">Rajdhani Express ‚Ä¢ 2025-10-18</div>
                                </div>
                                <div class="feedback-rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê 5.0</div>
                            </div>
                            <div class="feedback-comment">Excellent food and punctual arrival</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Success Modal -->
    <div id="success-modal" class="modal" style="display: none;">
        <div class="modal-content modal-success">
            <div class="success-icon">‚úì</div>
            <h3 id="success-title">Success!</h3>
            <p id="success-message">Operation completed successfully</p>
            <button class="btn btn--primary" onclick="closeSuccessModal()">OK</button>
        </div>
    </div>


    <script src="app.js"></script>
</body>
</html>
